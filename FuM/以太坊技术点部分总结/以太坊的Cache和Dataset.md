# 以太坊的Cache和Dataset

在比特币的挖矿过程中，仅仅需要较为简单的哈希运算，而不需要额外的计算资源（内存等），于是比特币的挖矿过程逐渐成为了算力的竞争，于是就出现了ASIC矿机，这种矿机相比于个人计算机，进行普通的计算，其算力是个人计算机的数千倍，刚好适用于进行比特币中的挖矿，因此，普通人要想挖矿，就得有更专业的设备，挖矿这一行业都出现了中心化的现象，这与比特币当初设计之初的去中心化理念背道而驰了。

于是，设计以太坊挖矿的时候，采用了全新的挖矿过程以做到ASIC Resistance。ASIC只能进行运算，却没有额外存储空间，于是以太坊在挖矿过程中设计了两个数据结构，分别为Cache和dataset。其中Cache是16M大小，而dataset是1G大小，对于矿工来说，每次选取一个nonce之后的挖矿操作，都要从dataset中读取数据，这就要求矿机有存储能力，挖矿过程中引入了读取内存的操作，这就极大的降低了ASIC矿机的算力，使其挖矿的优势不那么明显，而普通的个人计算机也能进行挖矿。具体的挖矿过程如下：

1. 根据当前区块信息生成一个Seed种子。
2. 根据Seed种子生成16M大小的Cache,Cache是一个List结构，其数据前后相关。
3. 根据Cache来生成1G大小的Dataset（又称为Dag）。
4. 矿机每次选取一个Nonce之后，从Dataset中读取两个数进行挖矿测试，直到找到合适的Nonce。

区块链中每30000个区块的时候，Cache和Dataset的大小都会增加1/128,也就是说Cache会增加128K，而Dataset会增加8M。

